<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script>
		"use strict";
			//访问器属性
		/*	var emp1={id:1001,name:"Eric"};
			+function(){
				var _age;//受保护的变量——作用域链中
				//为emp1添加访问器属性age
				Object.defineProperty(emp1,"age",{
					get(){//console.log("自动调用get");
						return _age;},
					set(val){//console.log("自动调用set");
						console.log("验证val="+val);
						if(val>=18&&val<=65)
							_age=val;
						else
							throw new Error("年龄必须介于18-65之间");
					},
					enumerable:true,
					configurable:false
				});
			}();
			console.dir(emp1);
			console.log(emp1.age);
			emp1.age=30;
			//emp1._age=-2;
			console.log(emp1.age);
		*/
		function emp(id,name,salary,age){
			this.id=id;
			this.name=name;
			this.salary=salary;
			var _age;
			Object.defineProperties(this,{
				id:{writable:false},
				salary:{enumerable:false},
				age:{//添加访问器属性age
					get(){return _age;},
					set(val){
						if(val>=25&&val<=65)
							_age=val;
						else
							throw new Error("年龄必须介于25-65");
					}
				}
			});
			this.age=age;
			//防扩展
			//Object.preventExtensions(this);
			Object.seal(this);
		};
		//console.dir(emp);
		var emp1=new emp(2001,"steve",20000,26);
		console.dir(emp1);
		console.log(emp1.age);
		//delete emp1.id;
		</script>
	</body>
</html>